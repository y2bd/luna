(this.webpackJsonpluna=this.webpackJsonpluna||[]).push([[0],[,,,,function(e,t,n){e.exports=n(11)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),c=n(3),i=n.n(c),l=(n(9),n(1));n(10);function s(){var e=r.useState(),t=Object(l.a)(e,2),n=t[0],a=t[1],o=r.useState(),c=Object(l.a)(o,2),i=c[0],s=c[1],u=r.useCallback((function(){if(window.location.hash){var e=window.location.hash.match("^#?([A-Za-z0-9_]+)/?([A-Za-z0-9_]+)?$"),t=null!==e&&void 0!==e?e:[],n=Object(l.a)(t,3),r=(n[0],n[1]),o=n[2];a(r||void 0),s(o||void 0),document.title=r?"Luna - "+r:"Luna"}else window.location.hash="popular"}),[a,s]),d=r.useCallback((function(){window.location.hash=n||""}),[n]),m=r.useCallback((function(e,t){window.location.hash="".concat(e,"/").concat(t)}),[]);return r.useEffect((function(){return window.addEventListener("hashchange",u),u(),function(){return window.removeEventListener("hashchange",u)}})),{subreddit:n,article:i,goHome:d,goToArticle:m}}!function(e){e.Best="best",e.New="new"}(a||(a={}));var u=function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.Best,n=r.useState([]),o=Object(l.a)(n,2),c=o[0],i=o[1],s=r.useState(!1),u=Object(l.a)(s,2),d=u[0],m=u[1],f=r.useState(void 0),h=Object(l.a)(f,2),v=h[0],p=h[1];return r.useEffect((function(){m(!0),fetch("https://www.reddit.com/r/".concat(e,"/").concat(t,".json?raw_json=1"),{headers:{"User-Agent":"web:me.y2bd.luna:v0.1.0 (by /u/y2bd)"}}).then((function(e){return e.json()})).then((function(e){i(e.data.children),m(!1),p(void 0)})).catch((function(e){p(e),m(!1)}))}),[e,t]),{posts:c,loading:d,error:v}}(e.subreddit),n=t.posts,o=t.loading,c=t.error;return r.createElement("div",{className:"App"},o&&r.createElement("p",null,"Loading..."),c&&r.createElement("p",null,"Error Whoops... ",c.message),n&&n.map((function(e){return r.createElement(d,Object.assign({key:e.data.id},e))})))},d=function(e){var t=s().goToArticle,n=e.expanded,a=e.data,o=a.id,c=a.permalink,i=a.url,l=a.subreddit,u=a.selftext_html,d=r.useCallback((function(){return window.open(i)}),[c]),m=r.useCallback((function(e){e.stopPropagation(),t(l,o)}),[]),f=r.useCallback((function(e){return e.preventDefault()}),[]),h=r.useMemo((function(){var e;return null===(e=i.match("^https?://(?:www\\.)?(.+?)(?:/.*)?$"))||void 0===e?void 0:e[1]}),[i]);return r.createElement("div",{className:"Post",onClick:d},r.createElement("div",{className:"PostData"},r.createElement("a",{href:i,onClick:f},e.data.title),r.createElement("aside",null,h),n&&u&&r.createElement("article",{dangerouslySetInnerHTML:{__html:u}})),!n&&r.createElement("aside",{className:"CommentButton",onClick:m},r.createElement("a",null,"\u275e")))},m=function(e){var t=function(e,t){var n=r.useState(),a=Object(l.a)(n,2),o=a[0],c=a[1],i=r.useState([]),s=Object(l.a)(i,2),u=s[0],d=s[1],m=r.useState(!1),f=Object(l.a)(m,2),h=f[0],v=f[1],p=r.useState(void 0),w=Object(l.a)(p,2),b=w[0],E=w[1];return r.useEffect((function(){v(!0),fetch("https://www.reddit.com/r/".concat(e,"/comments/").concat(t,".json?raw_json=1"),{headers:{"User-Agent":"web:me.y2bd.luna:v0.1.0 (by /u/y2bd)"}}).then((function(e){return e.json()})).then((function(e){c(e[0].data.children[0]),d(e[1].data.children),E(void 0),v(!1)})).catch((function(e){E(e),v(!1)}))}),[e,t]),{post:o,replies:u,loading:h,error:b}}(e.subreddit,e.article),n=t.post,a=t.replies,o=t.loading,c=t.error;return r.useLayoutEffect((function(){document.querySelectorAll(".ReplyData .md a").forEach((function(e){var t=e;t.target="_blank",t.href.includes(window.location.host)&&(t.href="https://reddit.com"+t.href.slice(window.location.origin.length))}))}),[a]),r.createElement("div",{className:"App"},o&&r.createElement("p",null,"Loading..."),c&&r.createElement("p",null,"Error Whoops... ",c.message),n&&r.createElement(d,Object.assign({expanded:!0},n)),a&&a.map((function(e){return r.createElement(f,Object.assign({key:e.data.id,index:-1},e))})))},f=function e(t){var n,a,o=t.indent,c=void 0===o?0:o,i=t.index,s=t.data,u=s.body_html,d=s.replies,m=r.useState(!0),f=Object(l.a)(m,2),h=f[0],v=f[1],p=r.useRef(null),w=(null!==(n=null===d||void 0===d||null===(a=d.data)||void 0===a?void 0:a.children.filter((function(e){return!!e.data.body})).length)&&void 0!==n?n:0)>0,b=0===i,E=-1===i;return r.createElement(r.Fragment,null,r.createElement("div",{className:"Reply "+(E?"Top ":""),ref:p,onClick:function(e){var t;w&&("a"===e.target.tagName.toLowerCase()||(null===(t=window.getSelection())||void 0===t?void 0:t.toString())||v(!h))}},r.createElement("div",{style:{display:"flex"}},new Array(c).fill(0).map((function(){return r.createElement("div",{className:"Indent"})}))),r.createElement("div",{className:"ReplyData "+(w?"Children ":"")+(b?"First ":"")},r.createElement("article",{dangerouslySetInnerHTML:{__html:u}}))),h&&d&&d.data.children.filter((function(e){return!!e.data.body})).map((function(t,n){return r.createElement(e,Object.assign({key:t.data.id+t.data.author,index:n,indent:c+1},t))})),!h&&r.createElement("div",{className:"Collapsed"}),E&&r.createElement("div",{className:"Collapsed"}))},h=function(){var e=s(),t=e.subreddit,n=e.article;return t&&n?r.createElement(m,{subreddit:t,article:n}):t?r.createElement(u,{subreddit:t}):r.createElement("div",{className:"App"},r.createElement("p",null,"Loading..."))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(h,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[4,1,2]]]);
//# sourceMappingURL=main.bce421df.chunk.js.map