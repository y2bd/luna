(this.webpackJsonpluna=this.webpackJsonpluna||[]).push([[0],[,,,,function(e,t,n){e.exports=n(11)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a,o=n(0),r=n.n(o),c=n(3),i=n.n(c),l=(n(9),n(1));n(10);function s(){var e=o.useState(),t=Object(l.a)(e,2),n=t[0],a=t[1],r=new URLSearchParams;return r.append("grant_type","https://oauth.reddit.com/grants/installed_client"),r.append("device_id","DO_NOT_TRACK_THIS_DEVICE"),r.append("scope","identity,edit,flair,history,mysubreddits,privatemessages,read,report,save,submit,subscribe,vote,creddits"),o.useEffect((function(){fetch("https://www.reddit.com/api/v1/access_token",{method:"POST",body:r,headers:{Authorization:"Basic ek90N2VtVjJDYzJHVVE6R3IxdW0wSUdqQkxLenN6OGlDUTV4elpFVVVn"}}).then((function(e){return e.json()})).then((function(e){a(null===e||void 0===e?void 0:e.access_token)}))}),[a]),{accessToken:n}}function d(){var e=o.useState(),t=Object(l.a)(e,2),n=t[0],a=t[1],r=o.useState(),c=Object(l.a)(r,2),i=c[0],s=c[1],d=o.useCallback((function(){if(window.location.hash){var e=window.location.hash.match("^#?([A-Za-z0-9_]+)/?([A-Za-z0-9_]+)?$"),t=null!==e&&void 0!==e?e:[],n=Object(l.a)(t,3),o=n[1],r=n[2];a(o||void 0),s(r||void 0),document.title=o?"Luna - "+o:"Luna"}else window.location.hash="popular"}),[a,s]),u=o.useCallback((function(){window.location.hash=n||""}),[n]),m=o.useCallback((function(e,t){window.location.hash="".concat(e,"/").concat(t)}),[]);return o.useEffect((function(){return window.addEventListener("hashchange",d),d(),function(){return window.removeEventListener("hashchange",d)}})),{subreddit:n,article:i,goHome:u,goToArticle:m}}!function(e){e.Best="best",e.Hot="hot",e.New="new"}(a||(a={}));var u=function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.Hot,n=o.useState([]),r=Object(l.a)(n,2),c=r[0],i=r[1],d=o.useState(!1),u=Object(l.a)(d,2),m=u[0],h=u[1],f=o.useState(void 0),p=Object(l.a)(f,2),v=p[0],E=p[1],w=s(),b=w.accessToken;return o.useEffect((function(){h(!0),b&&fetch("https://oauth.reddit.com/r/".concat(e,"/").concat(t,"?api_type=json&raw_json=1"),{headers:{Authorization:"bearer "+b},method:"GET"}).then((function(e){return e.json()})).then((function(e){i(e.data.children),h(!1),E(void 0)})).catch((function(e){E(e),h(!1)}))}),[b,e,t]),{posts:c,loading:m,error:v}}(e.subreddit),n=t.posts,r=t.loading,c=t.error;return o.createElement("div",{className:"App"},r&&o.createElement("p",null,"Loading..."),c&&o.createElement("p",null,"Errora Whoops... ",c.message),n&&n.map((function(e){return o.createElement(m,Object.assign({key:e.data.id},e))})))},m=function(e){var t=d().goToArticle,n=e.expanded,a=e.data,r=a.id,c=a.url,i=a.subreddit,l=a.selftext_html,s=o.useCallback((function(){return window.open(c)}),[c]),u=o.useCallback((function(e){e.stopPropagation(),t(i,r)}),[i,r]),m=o.useCallback((function(e){return e.preventDefault()}),[]),h=o.useMemo((function(){var e;return null===(e=c.match("^https?://(?:www\\.)?(.+?)(?:/.*)?$"))||void 0===e?void 0:e[1]}),[c]);return o.createElement("div",{className:"Post",onClick:s},o.createElement("div",{className:"PostData"},o.createElement("a",{href:c,onClick:m},e.data.title),o.createElement("aside",null,h),n&&l&&o.createElement("article",{dangerouslySetInnerHTML:{__html:l}})),!n&&o.createElement("aside",{className:"CommentButton",onClick:u},o.createElement("a",null,"\u275e")))},h=function(e){var t=function(e,t){var n=o.useState(),a=Object(l.a)(n,2),r=a[0],c=a[1],i=o.useState([]),d=Object(l.a)(i,2),u=d[0],m=d[1],h=o.useState(!1),f=Object(l.a)(h,2),p=f[0],v=f[1],E=o.useState(void 0),w=Object(l.a)(E,2),b=w[0],g=w[1],k=s().accessToken;return o.useEffect((function(){v(!0),k&&fetch("https://oauth.reddit.com/r/".concat(e,"/comments/").concat(t,"?&api_type=json&raw_json=1"),{headers:{Authorization:"bearer "+k},method:"GET"}).then((function(e){return e.json()})).then((function(e){c(e[0].data.children[0]),m(e[1].data.children),g(void 0),v(!1)})).catch((function(e){g(e),v(!1)}))}),[e,t,k]),{post:r,replies:u,loading:p,error:b}}(e.subreddit,e.article),n=t.post,a=t.replies,r=t.loading,c=t.error;return o.useLayoutEffect((function(){document.querySelectorAll(".ReplyData .md a").forEach((function(e){var t=e;t.target="_blank",t.href.includes(window.location.host)&&(t.href="https://reddit.com"+t.href.slice(window.location.origin.length))}))}),[a]),o.createElement("div",{className:"App"},r&&o.createElement("p",null,"Loading..."),c&&o.createElement("p",null,"Errora Whoops... ",c.message),n&&o.createElement(m,Object.assign({expanded:!0},n)),a&&a.map((function(e){return o.createElement(f,Object.assign({key:e.data.id,index:-1},e))})))},f=function e(t){var n,a,r=t.indent,c=void 0===r?0:r,i=t.index,s=t.data,d=s.body_html,u=s.replies,m=o.useState(!0),h=Object(l.a)(m,2),f=h[0],p=h[1],v=o.useRef(null),E=(null!==(n=null===u||void 0===u||null===(a=u.data)||void 0===a?void 0:a.children.filter((function(e){return!!e.data.body})).length)&&void 0!==n?n:0)>0,w=0===i,b=-1===i;return o.createElement(o.Fragment,null,o.createElement("div",{className:"Reply "+(b?"Top ":""),ref:v,onClick:function(e){var t;E&&("a"===e.target.tagName.toLowerCase()||(null===(t=window.getSelection())||void 0===t?void 0:t.toString())||p(!f))}},o.createElement("div",{style:{display:"flex"}},new Array(c).fill(0).map((function(){return o.createElement("div",{className:"Indent"})}))),o.createElement("div",{className:"ReplyData "+(E?"Children ":"")+(w?"First ":"")},o.createElement("article",{dangerouslySetInnerHTML:{__html:d}}))),f&&u&&u.data.children.filter((function(e){return!!e.data.body})).map((function(t,n){return o.createElement(e,Object.assign({key:t.data.id+t.data.author,index:n,indent:c+1},t))})),!f&&o.createElement("div",{className:"Collapsed"}),b&&o.createElement("div",{className:"Collapsed"}))},p=function(){var e=d(),t=e.subreddit,n=e.article;return t&&n?o.createElement(h,{subreddit:t,article:n}):t?o.createElement(u,{subreddit:t}):o.createElement("div",{className:"App"},o.createElement("p",null,"Loading..."))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(p,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[4,1,2]]]);
//# sourceMappingURL=main.bd8c3ef8.chunk.js.map